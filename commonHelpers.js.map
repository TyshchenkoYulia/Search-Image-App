{"version":3,"file":"commonHelpers.js","sources":["../src/img/error-icon.svg","../src/js/pixabay-api.js","../src/js/refs.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__09c89fb5__\"","// export function getImages(inputValue) {\n\n//     const KEY = '42556248-7d7b04b226b16d9af953a75af';\n//     const BACE_URL = \"https://pixabay.com/api/?key=\";\n//     const QUERY = inputValue;\n\n//     const URL = BACE_URL+KEY+\"&q=\"+QUERY+\"&image_type=photo&orientation=horizontal&safesearch=true\";\n\n//     return fetch(URL)\n//         .then(response => {\n//             if (!response.ok) {\n//                 throw new Error(`Error with status ${response.status}`)\n//             }\n//             return response.json();\n//         })\n//         .catch(error => {\n//             console.log(error);\n//         })\n// }\nimport axios from 'axios';\n\n// ================================================================\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst KEY = '42556248-7d7b04b226b16d9af953a75af';\n\nexport async function getImages(searchQuery, page) {\n  const { data } = await axios.get('', {\n    params: {\n      page: page,\n      per_page: 10,\n      key: KEY,\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  });\n\n  return data;\n}\n","export const refs = {\n  gallery: document.querySelector('.gallery'),\n  formSubmit: document.querySelector('.form'),\n  input: document.querySelector('.input-value'),\n  section: document.querySelector('section'),\n  loader: document.querySelector('div'),\n  loadMoreButton: document.querySelector('[data-action=\"load-more\"]'),\n};\n","// import {refs} from \"./refs\";\n\n// // ==============================================================\n\n// export function renderGalleryMarkup(images) {\n\n//     const markup = images.map(\n//         ({\n//         webformatURL,\n//         largeImageURL,\n//         tags,\n//         likes,\n//         views,\n//         comments,\n//         downloads}) => {\n\n//         return`<li class=\"gallery-item\">\n//                     <a class=\"gallery-link\" href=\"${largeImageURL}\">\n//                         <img class=\"gallery-image\"\n//                             src=\"${webformatURL}\"\n//                             alt=\"${tags}\" />\n//                     </a>\n//                     <ul class=\"list\">\n//                         <li class=\"list-info\">Likes<p class=\"info\">${likes}</p></li>\n//                         <li class=\"list-info\">Views<p class=\"info\">${views}</p></li>\n//                         <li class=\"list-info\">Comments<p class=\"info\">${comments}</p></li>\n//                         <li class=\"list-info\">Downloads<p class=\"info\">${downloads}</p></li>\n//                     </ul>\n//                 </li>`\n\n//     }).join('');\n\n//     refs.gallery.innerHTML = markup;\n\n//    refs.loader.classList.remove('loader');\n// }\nimport { refs } from './refs';\n\n// ==============================================================\n\nexport function renderGalleryMarkup(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                        <img class=\"gallery-image\"\n                            src=\"${webformatURL}\"\n                            alt=\"${tags}\" />\n                    </a>\n                    <ul class=\"list\">\n                        <li class=\"list-info\">Likes<p class=\"info\">${likes}</p></li>\n                        <li class=\"list-info\">Views<p class=\"info\">${views}</p></li>\n                        <li class=\"list-info\">Comments<p class=\"info\">${comments}</p></li>\n                        <li class=\"list-info\">Downloads<p class=\"info\">${downloads}</p></li>\n                    </ul>\n                </li>`;\n      }\n    )\n    .join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n","// import iziToast from \"izitoast\";\n// import \"izitoast/dist/css/iziToast.min.css\";\n\n// import SimpleLightbox from \"simplelightbox\";\n// import \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// import errorIcon from \"../src/img/error-icon.svg\";\n\n// import { getImages} from \"./js/pixabay-api\";\n// import { renderGalleryMarkup } from \"./js/render-functions\";\n\n// import { refs } from \"./js/refs\";\n\n// // ====================================================================\n\n// refs.formSubmit.addEventListener('submit', onButtonSubmitForm);\n\n// const lightbox = new SimpleLightbox('.gallery a',\n//                                         {\n//                                         captionsData: 'alt',\n//                                         captionDelay: 250,\n//     });\n\n// function onButtonSubmitForm(event) {\n//     event.preventDefault();\n\n//     refs.gallery.innerHTML = '';\n\n//     const inputValue = refs.input.value.trim();\n\n//     if (inputValue === '') {\n//             iziToast.show({\n\n//                     titleColor: '#fff',\n//                     titleSize: '16px',\n//                     message: `Please, enter your search query!!!`,\n//                     messageColor: '#fff',\n//                     messageSize: '16px',\n//                     position: 'topRight',\n//                     backgroundColor: '#59A10D',\n//                     close: false,\n//                 })\n\n//         return;\n//     }\n\n//     refs.loader.classList.add('loader');\n\n//     getImages(inputValue).then(data => {\n//         if (data.total === 0) {\n//                 iziToast.show({\n//                     titleColor: '#fff',\n//                     titleSize: '16px',\n//                     message: 'Sorry, there are no images matching your search query. Please try again!',\n//                     messageColor: '#fff',\n//                     messageSize: '16px',\n//                     iconUrl: errorIcon,\n//                     position: 'topRight',\n//                     backgroundColor: '#ef4040',\n//                     close: true,\n//                     maxWidth: '432px',\n//                 })\n//         }\n//         renderGalleryMarkup(data.hits);\n\n//         lightbox.refresh();\n\n//         })\n\n//     refs.formSubmit.reset();\n\n// }\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport errorIcon from '../src/img/error-icon.svg';\n\nimport { getImages } from './js/pixabay-api';\nimport { renderGalleryMarkup } from './js/render-functions';\n\nimport { refs } from './js/refs';\n\n// ====================================================================\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// ====================================================================\n\nlet page;\nlet searchQuery;\n\nrefs.formSubmit.addEventListener('submit', onButtonSubmitForm);\n\nasync function onButtonSubmitForm(event) {\n  event.preventDefault();\n\n  refs.gallery.innerHTML = '';\n  refs.loadMoreButton.classList.remove('load-more');\n\n  page = 1;\n\n  searchQuery = refs.input.value.trim();\n  refs.loadMoreButton.classList.add('is-close');\n\n  if (searchQuery === '') {\n    iziToast.show({\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: `Please, enter your search query!!!`,\n      messageColor: '#fff',\n      messageSize: '16px',\n      position: 'topRight',\n      backgroundColor: '#59A10D',\n      close: false,\n    });\n\n    return;\n  }\n\n  refs.loader.classList.add('loader');\n\n  try {\n    const data = await getImages(searchQuery, page);\n\n    if (data.total === 0) {\n      iziToast.show({\n        titleColor: '#fff',\n        titleSize: '16px',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fff',\n        messageSize: '16px',\n        iconUrl: errorIcon,\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        close: true,\n        maxWidth: '432px',\n      });\n\n      refs.loader.classList.remove('loader');\n      return;\n    }\n\n    renderGalleryMarkup(data.hits);\n\n    refs.loader.classList.remove('loader');\n\n    // const galleryElement = document.querySelector('.gallery-item');\n    // let rect = galleryElement.getBoundingClientRect();\n\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  }\n\n  refs.formSubmit.reset();\n\n  refs.loadMoreButton.classList.remove('is-close');\n}\n\nrefs.loadMoreButton.addEventListener('click', onButtonClickLoadmore);\n\nasync function onButtonClickLoadmore() {\n  page += 1;\n\n  refs.loader.classList.add('loader');\n\n  try {\n    const data = await getImages(searchQuery, page);\n    renderGalleryMarkup(data.hits);\n\n    window.scrollBy({\n      top: 172 * 3 + 24 * 2 + 20 * 2,\n      behavior: 'smooth',\n    });\n\n    lightbox.refresh();\n\n    if (Math.ceil(data.totalHits / 15) === page) {\n      refs.loadMoreButton.classList.add('is-close');\n      refs.loader.classList.remove('loader');\n\n      return iziToast.error({\n        icon: '',\n        color: 'blue',\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n\n  refs.loader.classList.remove('loader');\n}\n"],"names":["errorIcon","axios","KEY","getImages","searchQuery","page","data","refs","renderGalleryMarkup","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","onButtonSubmitForm","event","iziToast","error","onButtonClickLoadmore"],"mappings":"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"}